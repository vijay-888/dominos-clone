<div class="menu-item-details-container">
  <div class="details-header">
    <button class="back-btn" (click)="goBack()">
      <i class="pi pi-arrow-left"></i>
      Back to Menu
    </button>
  </div>

  <div class="details-content">
    <!-- Main Content Row -->
    <div class="row">
      <!-- Left Column - Image and Basic Info -->
      <div class="col-12 col-lg-6">
        <div class="image-section">
          <div class="main-image">
            <img [src]="menuItem.largeImage || menuItem.image" [alt]="menuItem.name" class="item-large-image">
          </div>
          
          <!-- Image Gallery (if multiple images) -->
          <div class="image-gallery" *ngIf="menuItem.galleryImages">
            <div class="gallery-item" *ngFor="let image of menuItem.galleryImages">
              <img [src]="image" [alt]="menuItem.name" class="gallery-thumbnail">
            </div>
          </div>
        </div>

         <!-- Nutritional Information -->
         <div class="nutritional-info" *ngIf="menuItem.nutritionalInfo">
          <h3>Nutritional Information</h3>
          <div class="nutrition-grid">
            <div class="nutrition-item">
              <span class="nutrition-label">Calories</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.calories }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Protein</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.protein }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Carbs</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.carbs }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Fat</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.fat }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Fiber</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.fiber }}</span>
            </div>
            <div class="nutrition-item">
              <span class="nutrition-label">Sodium</span>
              <span class="nutrition-value">{{ menuItem.nutritionalInfo.sodium }}</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Column - Details -->
      <div class="col-12 col-lg-6">
        <div class="details-section">
          <!-- Item Header -->
          <div class="item-header">
            <h1 class="item-title">{{ menuItem.name }}</h1>
            <div class="item-rating">
              <div class="stars">
                <i *ngFor="let star of getStarArray(menuItem.rating)" 
                   class="pi pi-star-fill" 
                   [class.filled]="star === 1"></i>
                <i *ngIf="getHalfStar(menuItem.rating)" class="pi pi-star-fill half-star"></i>
              </div>
              <span class="rating-value">{{ menuItem.rating }}</span>
              <span class="rating-count">({{ menuItem.reviews?.length || 0 }} reviews)</span>
            </div>
            <div class="item-price">{{ menuItem.price }}</div>
          </div>

          <!-- Description -->
          <div class="item-description">
            <h3>Description</h3>
            <p>{{ menuItem.detailedDescription || menuItem.description }}</p>
          </div>

          <!-- Ingredients -->
          <div class="ingredients-section" *ngIf="menuItem.ingredients">
            <h3>Ingredients</h3>
            <div class="ingredients-list">
              <span class="ingredient-tag" *ngFor="let ingredient of menuItem.ingredients">
                {{ ingredient }}
              </span>
            </div>
          </div>

         

          <!-- Additional Info -->
          <div class="additional-info">
            <div class="info-item" *ngIf="menuItem.preparationTime">
              <i class="pi pi-clock"></i>
              <span>Prep Time: {{ menuItem.preparationTime }}</span>
            </div>
            <!-- <div class="info-item" *ngIf="menuItem.size">
              <i class="pi pi-circle"></i>
              <span>Size: {{ menuItem.size }}</span>
            </div> -->
            <div class="info-item" *ngIf="menuItem.allergens">
              <i class="pi pi-exclamation-triangle"></i>
              <span>Allergens: {{ menuItem.allergens.join(', ') }}</span>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="action-buttons">
            <button class="btn-primary" *ngIf="!isInCart && !isProvider" (click)="addToCart()">
              <i class="pi pi-shopping-cart"></i>
              Add to Cart
            </button>
            <button class="btn-primary" *ngIf="isInCart && !isProvider" (click)="viewCart()">
              <i class="pi pi-shopping-cart"></i>
              View in Cart ({{ cartItemCount }})
            </button>
            <button class="btn-secondary" *ngIf="!isProvider" (click)="addToFavorites()">
              <i class="pi pi-heart"></i>
              Add to Favorites
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Reviews Section -->
    <div class="reviews-section" *ngIf="menuItem.reviews && menuItem.reviews.length > 0">
      <h2>Customer Reviews</h2>
      <div class="reviews-list">
        <div class="review-item" *ngFor="let review of menuItem.reviews">
          <div class="review-header">
            <div class="reviewer-info">
              <span class="reviewer-name">{{ review.userName }}</span>
              <div class="review-rating">
                <i *ngFor="let star of getStarArray(review.rating)" 
                   class="pi pi-star-fill" 
                   [class.filled]="star === 1"></i>
              </div>
            </div>
            <span class="review-date">{{ review.date }}</span>
          </div>
          <p class="review-comment">{{ review.comment }}</p>
        </div>
      </div>
    </div>

    <!-- Similar Items -->
    <div class="similar-items-section" *ngIf="menuItem.similarItems && menuItem.similarItems.length > 0">
      <h2>You Might Also Like</h2>
      <div class="similar-items-grid">
        <div class="similar-item" *ngFor="let item of menuItem.similarItems">
          <img [src]="item.image" [alt]="item.name" class="similar-item-image">
          <div class="similar-item-info">
            <h4>{{ item.name }}</h4>
            <span class="similar-item-price">{{ item.price }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
