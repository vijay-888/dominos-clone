<div class="my-items-container">
  <!-- Header Section -->
  <div class="page-header">
    <div class="header-content">
      <h1>My Items</h1>
      <p>Manage and track your menu items</p>
    </div>
    <div class="header-actions">
      <button class="btn-primary" routerLink="/provider/add-items">
        <i class="pi pi-plus"></i>
        Add New Item
      </button>
    </div>
  </div>

  <!-- Statistics Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon total">
        <i class="pi pi-box"></i>
      </div>
      <div class="stat-content">
        <h3 [appOdometer]="getTotalItems()">0</h3>
        <p>Total Items</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon published">
        <i class="pi pi-check-circle"></i>
      </div>
      <div class="stat-content">
        <h3 [appOdometer]="getPublishedItems()">0</h3>
        <p>Published</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon pending">
        <i class="pi pi-clock"></i>
      </div>
      <div class="stat-content">
        <h3 [appOdometer]="getPendingItems()">0</h3>
        <p>Pending Approval</p>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon draft">
        <i class="pi pi-file-edit"></i>
      </div>
      <div class="stat-content">
        <h3 [appOdometer]="getDraftItems()">0</h3>
        <p>Drafts</p>
      </div>
    </div>
  </div>

  <!-- Items Table -->
  <div class="table-container">
    <p-table 
      [value]="items" 
      [loading]="loading"
      [paginator]="true" 
      [rows]="10"
      [showCurrentPageReport]="true"
      currentPageReportTemplate="Showing {first} to {last} of {totalRecords} items"
      [rowsPerPageOptions]="[5,10,25]"
      styleClass="p-datatable-sm"
      [tableStyle]="{'min-width': '50rem'}"
      selectionMode="multiple"
      [(selection)]="selectedItems"
      dataKey="id">
      
      <!-- Table Header -->
      <ng-template pTemplate="header">
        <tr>
          <th style="width: 3rem">
            <p-tableHeaderCheckbox></p-tableHeaderCheckbox>
          </th>
          <th>Item</th>
          <th>Category</th>
          <th>Price</th>
          <th>Status</th>
          <th>Rating</th>
          <th>Orders</th>
          <!-- <th>Created</th> -->
          <th>Actions</th>
        </tr>
      </ng-template>

      <!-- Table Body -->
      <ng-template pTemplate="body" let-item>
        <tr>
          <td>
            <p-tableCheckbox [value]="item"></p-tableCheckbox>
          </td>
          
          <!-- Item Column -->
          <td>
            <div class="item-info">
              <img [src]="item.image" [alt]="item.name" class="item-image" 
                   (error)="onImageError($event)">
              <div class="item-details">
                <h4 class="item-name">{{ item.name }}</h4>
                <p class="item-description">{{ item.description }}</p>
              </div>
            </div>
          </td>
          
          <!-- Category Column -->
          <td>
            <span class="category-badge">{{ item.category }}</span>
          </td>
          
          <!-- Price Column -->
          <td>
            <span class="price">{{ item.price }}</span>
          </td>
          
          <!-- Status Column -->
          <td>
            <p-tag 
              [value]="item.status" 
              [severity]="getStatusSeverity(item.status)"
              [icon]="getStatusIcon(item.status)">
            </p-tag>
          </td>
          
          <!-- Rating Column -->
          <td>
            <div class="rating" *ngIf="item.rating > 0; else noRating">
              <i class="pi pi-star-fill"></i>
              <span>{{ item.rating }}</span>
            </div>
            <ng-template #noRating>
              <span class="no-rating">No ratings</span>
            </ng-template>
          </td>
          
          <!-- Orders Column -->
          <td>
            <span class="orders-count">{{ item.orders }}</span>
          </td>
          
          <!-- Created Date Column -->
          <!-- <td>
            <span class="date">{{ item.createdAt | date:'MMM dd, yyyy' }}</span>
          </td> -->
          
          <!-- Actions Column -->
          <td>
            <div class="action-buttons">
              <button 
                class="action-btn view" 
                (click)="viewItem(item)"
                pTooltip="View Details"
                tooltipPosition="top">
                <i class="pi pi-eye"></i>
              </button>
              
              <button 
                class="action-btn edit" 
                (click)="editItem(item)"
                pTooltip="Edit Item"
                tooltipPosition="top">
                <i class="pi pi-pencil"></i>
              </button>
              
              <!-- <button 
                class="action-btn duplicate" 
                (click)="duplicateItem(item)"
                pTooltip="Duplicate Item"
                tooltipPosition="top">
                <i class="pi pi-copy"></i>
              </button> -->
              
              <button 
                class="action-btn delete" 
                (click)="deleteItem(item)"
                pTooltip="Delete Item"
                tooltipPosition="top">
                <i class="pi pi-trash"></i>
              </button>
            </div>
          </td>
        </tr>
      </ng-template>

      <!-- Empty State -->
      <ng-template pTemplate="emptymessage">
        <tr>
          <td colspan="9" class="empty-state">
            <div class="empty-content">
              <i class="pi pi-box empty-icon"></i>
              <h3>No items found</h3>
              <p>You haven't created any menu items yet.</p>
              <button class="btn-primary" routerLink="/provider/add-items">
                <i class="pi pi-plus"></i>
                Create Your First Item
              </button>
            </div>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>

  <!-- Bulk Actions -->
  <div class="bulk-actions" *ngIf="selectedItems.length > 0">
    <div class="bulk-info">
      <span>{{ selectedItems.length }} item(s) selected</span>
    </div>
    <div class="bulk-buttons">
      <button class="btn-secondary" (click)="selectedItems = []">
        <i class="pi pi-times"></i>
        Clear Selection
      </button>
      <button class="btn-danger" (click)="deleteSelectedItems()">
        <i class="pi pi-trash"></i>
        Delete Selected
      </button>
    </div>
  </div>
</div>
